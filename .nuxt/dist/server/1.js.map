{"version":3,"file":"1.js","sources":["webpack:///./api/user.js","webpack:///./api/article.js","webpack:///./api/tags.js","webpack:///./api/index.js","webpack:///./mixins/article-mixin.js","webpack:///./mixins/user-mixin.js","webpack:///./components/article-item.vue?d86e","webpack:///./components/article-item.vue","webpack:///./components/article-item.vue?884b","webpack:///./components/article-item.vue?0b44","webpack:///./pages/profile.vue?049d","webpack:///./pages/profile.vue","webpack:///./pages/profile.vue?0be0","webpack:///./pages/profile.vue?9213"],"sourcesContent":["import { request } from \"@/plugins/request\";\n\nexport function login(data = { email: \"\", password: \"\" }) {\n  return request.post(\"/api/users/login\", data);\n}\n\nexport function register(data) {\n  return request({\n    method: \"POST\",\n    url: \"/api/users\",\n    data,\n  });\n}\n\nexport function follow(username) {\n  return request.post(`/api/profiles/${username}/follow`);\n}\nexport function unfollow(username) {\n  return request.delete(`/api/profiles/${username}/follow`);\n}\nexport function getUserProfile(username) {\n  return request.get(`/api/profiles/${username}`);\n}\nexport function updateUser(user) {\n  return request.put(`/api/user`, { user });\n}\nexport function getCurrentUser() {\n  return request.get(`/api/user`);\n}\n","import { request } from \"@/plugins/request\";\n\nexport function getArticles(params) {\n  return request({ url: \"/api/articles\", method: \"GET\", params });\n}\n\nexport function addArticle(article) {\n  return request({ url: \"/api/articles\", method: \"POST\", data:{article} });\n}\nexport function deleteArticle(slug) {\n  return request({ url: `/api/articles/${slug}`, method: \"DELETE\" });\n}\nexport function updateArticle(slug, article) {\n  return request({ url: `/api/articles/${slug}`, method: \"PUT\", data:{article}});\n}\n\nexport function getYourArticles(params) {\n  return request.get(\"/api/articles/feed\", { params });\n}\nexport function addFavorite(slug) {\n  return request.post(`/api/articles/${slug}/favorite`);\n}\nexport function removeFavorite(slug) {\n  return request.delete(`/api/articles/${slug}/favorite`);\n}\nexport function getArticleDetail(slug) {\n  return request.get(`/api/articles/${slug}`);\n}\nexport function getArticleComments(slug) {\n  return request.get(`/api/articles/${slug}/comments`);\n}\nexport function addArticleComments(slug, data) {\n  return request.post(`/api/articles/${slug}/comments`, data);\n}\nexport function deleteArticleComments(slug, id) {\n  return request.delete(`/api/articles/${slug}/comments/${id}`);\n}\n","import {request} from \"@/plugins/request\";\n\nexport function getTags() {\n  return request.get(\"/api/tags\");\n}\n","export * from \"./user\";\nexport * from \"./article\";\nexport * from \"./tags\";\n","import { mapState } from \"vuex\";\nimport { addFavorite, removeFavorite } from \"./../api\";\nexport default {\n  computed: {\n    ...mapState([\"user\"]),\n  },\n  methods: {\n    async onFavor(article) {\n      if (!this.user) {\n        alert(\"登录之后才能点赞啊~\");\n        return this.$router.replace(\"/login\");\n      }\n      this.$set(article, \"disabled\", true);\n      if (article.favorited) {\n        await removeFavorite(article.slug);\n        article.favoritesCount -= 1;\n        article.favorited = false;\n      } else {\n        await addFavorite(article.slug);\n        article.favoritesCount += 1;\n        article.favorited = true;\n      }\n      article.disabled = false;\n    },\n  },\n};\n","import { follow, unfollow } from \"../api\";\nexport default {\n  methods: {\n    async onFollow(author) {\n      if (!this.user) {\n        alert(\"not login\");\n        return this.$router.replace(\"/login\");\n      }\n      this.$set(author, \"disabled\", true);\n      if (author.following) {\n        await unfollow(author.username);\n        author.following = false;\n      } else {\n        await follow(author.username);\n        author.following = true;\n      }\n      author.disabled = false;\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<div class=\\\"article-meta\\\">\",\"</div>\",[_c('nuxt-link',{attrs:{\"to\":{\n              name: 'profile', \n              params: {username: _vm.article.author.username}\n              }}},[_c('img',{attrs:{\"src\":_vm.article.author.image}})]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"info\\\">\",\"</div>\",[_c('nuxt-link',{attrs:{\"to\":{\n              name: 'profile', \n              params: {username: _vm.article.author.username}\n              }}},[_vm._v(_vm._s(_vm.article.author.username))]),_vm._ssrNode(\" <span class=\\\"date\\\">\"+_vm._ssrEscape(_vm._s(_vm._f(\"date\")(_vm.article.createdAt,\"MMMM DD,YYYY\")))+\"</span>\")],2),_vm._ssrNode(\" <button\"+(_vm._ssrAttr(\"disabled\",_vm.article.disabled))+(_vm._ssrClass(\"btn btn-outline-primary btn-sm pull-xs-right\",{'active':_vm.article.favorited}))+\"><i class=\\\"ion-heart\\\"></i>\"+_vm._ssrEscape(\"\\n      \"+_vm._s(_vm.article.favoritesCount)+\"\\n    \")+\"</button>\")],2),_vm._ssrNode(\" \"),_c('nuxt-link',{staticClass:\"preview-link\",attrs:{\"to\":{name: 'article', params: {slug: _vm.article.slug}}}},[_c('h1',[_vm._v(_vm._s(_vm.article.title))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.article.description))]),_vm._v(\" \"),_c('span',[_vm._v(\"Read more...\")]),_vm._v(\" \"),_c('ul',{staticClass:\"tag-list preview-link\"},_vm._l((_vm.article.tagList),function(tag){return _c('li',{key:tag,staticClass:\"tag-default tag-pill tag-outline\"},[_vm._v(_vm._s(tag))])}),0)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport articleMixin from \"@/mixins/article-mixin\";\nexport default {\n  mixins: [articleMixin],\n  props: [\"article\"],\n};\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./article-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./article-item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./article-item.vue?vue&type=template&id=033013d9&\"\nimport script from \"./article-item.vue?vue&type=script&lang=js&\"\nexport * from \"./article-item.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"1cc8f10c\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"profile-page\"},[_vm._ssrNode(\"<div class=\\\"user-info\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-xs-12 col-md-10 offset-md-1\\\">\",\"</div>\",[_vm._ssrNode(\"<img\"+(_vm._ssrAttr(\"src\",_vm.profile.image))+\" class=\\\"user-img\\\"> <h4>\"+_vm._ssrEscape(_vm._s(_vm.profile.username))+\"</h4> <p>\"+_vm._ssrEscape(_vm._s(_vm.profile.bio))+\"</p> \"),(!_vm.user || _vm.user.username !== _vm.profile.username)?_vm._ssrNode(\"<button\"+(_vm._ssrAttr(\"disabled\",_vm.user && _vm.user.disabled))+(_vm._ssrClass(\"btn btn-sm btn-outline-secondary action-btn\",{active:_vm.profile.following}))+\">\",\"</button>\",[_vm._ssrNode(\"<i class=\\\"ion-plus-round\\\"></i>\"+_vm._ssrEscape(\"\\n             \\n            \"+_vm._s(_vm.profile.following ? 'Unfollow':'Follow')+\" \"+_vm._s(_vm.profile.username)+\"\\n          \"))],2):_c('nuxt-link',{staticClass:\"btn btn-sm btn-outline-secondary action-btn\",attrs:{\"to\":{\n              name: 'settings'\n            }}},[_c('i',{staticClass:\"ion-gear-a\"}),_vm._v(\" Edit Profile Settings\\n          \")])],2)])])]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"container\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-xs-12 col-md-10 offset-md-1\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"articles-toggle\\\">\",\"</div>\",[_vm._ssrNode(\"<ul class=\\\"nav nav-pills outline-active\\\">\",\"</ul>\",[_vm._ssrNode(\"<li class=\\\"nav-item\\\">\",\"</li>\",[_c('nuxt-link',{staticClass:\"nav-link\",class:{active: _vm.tab == 'my_tab'},attrs:{\"to\":{name: 'profile', params: {username: _vm.profile.username}},\"exact\":\"\"}},[_vm._v(\"My Articles\")])],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<li class=\\\"nav-item\\\">\",\"</li>\",[_c('nuxt-link',{staticClass:\"nav-link\",class:{active: _vm.tab == 'favorite_tab'},attrs:{\"to\":{name: 'profile', params: {username: _vm.profile.username}, query: {tab:'favorite_tab'}},\"exact\":\"\"}},[_vm._v(\"Favorited Articles\")])],1)],2)]),_vm._ssrNode(\" \"+((!_vm.articles || _vm.articles.length == 0)?(\"<div class=\\\"article-preview\\\">No articles are here... yet.</div>\"):\"<!---->\")+\" \"),_vm._l((_vm.articles),function(article){return _vm._ssrNode(\"<div class=\\\"article-preview\\\">\",\"</div>\",[_c('article-item',{attrs:{\"article\":article}})],1)}),_vm._ssrNode(\" \"),_vm._ssrNode(\"<nav>\",\"</nav>\",[_vm._ssrNode(\"<ul class=\\\"pagination\\\">\",\"</ul>\",_vm._l((_vm.totalPage),function(item){return _vm._ssrNode(\"<li\"+(_vm._ssrClass(\"page-item\",{active: _vm.page == item}))+\">\",\"</li>\",[_c('nuxt-link',{staticClass:\"page-link\",attrs:{\"to\":{name: 'profile', query: {page: item, tab: _vm.tab}}}},[_vm._v(_vm._s(item))])],1)}),0)])],2)])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getUserProfile, getArticles } from \"../api\";\nimport { mapState } from \"vuex\";\nimport userMixin from \"@/mixins/user-mixin\";\nimport articleMixin from \"@/mixins/article-mixin\";\nimport ArticleItem from '@/components/article-item'\nexport default {\n  components: {ArticleItem},\n  async asyncData({ params, query }) {\n    const { username } = params;\n    const { tab = \"my_tab\", page = 1 } = query;\n    const limit = 10;\n    const offset = (page - 1) * limit;\n    const param =\n      tab == \"my_tab\" ? { author: username } : { favorited: username };\n    param.limit = limit;\n    param.offset = offset;\n    const articleReq = getArticles(param);\n    const profileReq = getUserProfile(username);\n    const [articleData, profileData] = await Promise.all([\n      articleReq,\n      profileReq,\n    ]);\n    const { articles, articlesCount } = articleData.data;\n    const { profile } = profileData.data;\n    const totalPage = Math.ceil(articlesCount / limit);\n    return {\n      profile,\n      articles,\n      totalPage,\n      tab,\n      page,\n    };\n  },\n  watchQuery: [\"tab\"],\n  mixins: [userMixin, articleMixin],\n  computed: {\n    ...mapState([\"user\"]),\n  },\n};\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./profile.vue?vue&type=template&id=bbf9a9ac&\"\nimport script from \"./profile.vue?vue&type=script&lang=js&\"\nexport * from \"./profile.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"41124347\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AAEA;AACA;AACA;;ACJA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAlBA;AAJA;;;;;;;;ACFA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAhBA;AADA;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAFA;;AC/CA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAIA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AAAA;AACA;AACA;AAAA;AA9BA;;AC3FA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}