{"version":3,"file":"2.js","sources":["webpack:///./api/user.js","webpack:///./api/article.js","webpack:///./api/tags.js","webpack:///./api/index.js","webpack:///./mixins/article-mixin.js","webpack:///./mixins/user-mixin.js","webpack:///./pages/article.vue?463d","webpack:///./components/article-meta.vue?9cfa","webpack:///./components/article-meta.vue","webpack:///./components/article-meta.vue?9a0e","webpack:///./components/article-meta.vue?878b","webpack:///./pages/article.vue","webpack:///./pages/article.vue?896d","webpack:///./pages/article.vue?83a4"],"sourcesContent":["import { request } from \"@/plugins/request\";\n\nexport function login(data = { email: \"\", password: \"\" }) {\n  return request.post(\"/api/users/login\", data);\n}\n\nexport function register(data) {\n  return request({\n    method: \"POST\",\n    url: \"/api/users\",\n    data,\n  });\n}\n\nexport function follow(username) {\n  return request.post(`/api/profiles/${username}/follow`);\n}\nexport function unfollow(username) {\n  return request.delete(`/api/profiles/${username}/follow`);\n}\nexport function getUserProfile(username) {\n  return request.get(`/api/profiles/${username}`);\n}\nexport function updateUser(user) {\n  return request.put(`/api/user`, { user });\n}\nexport function getCurrentUser() {\n  return request.get(`/api/user`);\n}\n","import { request } from \"@/plugins/request\";\n\nexport function getArticles(params) {\n  return request({ url: \"/api/articles\", method: \"GET\", params });\n}\n\nexport function addArticle(article) {\n  return request({ url: \"/api/articles\", method: \"POST\", data:{article} });\n}\nexport function deleteArticle(slug) {\n  return request({ url: `/api/articles/${slug}`, method: \"DELETE\" });\n}\nexport function updateArticle(slug, article) {\n  return request({ url: `/api/articles/${slug}`, method: \"PUT\", data:{article}});\n}\n\nexport function getYourArticles(params) {\n  return request.get(\"/api/articles/feed\", { params });\n}\nexport function addFavorite(slug) {\n  return request.post(`/api/articles/${slug}/favorite`);\n}\nexport function removeFavorite(slug) {\n  return request.delete(`/api/articles/${slug}/favorite`);\n}\nexport function getArticleDetail(slug) {\n  return request.get(`/api/articles/${slug}`);\n}\nexport function getArticleComments(slug) {\n  return request.get(`/api/articles/${slug}/comments`);\n}\nexport function addArticleComments(slug, data) {\n  return request.post(`/api/articles/${slug}/comments`, data);\n}\nexport function deleteArticleComments(slug, id) {\n  return request.delete(`/api/articles/${slug}/comments/${id}`);\n}\n","import {request} from \"@/plugins/request\";\n\nexport function getTags() {\n  return request.get(\"/api/tags\");\n}\n","export * from \"./user\";\nexport * from \"./article\";\nexport * from \"./tags\";\n","import { mapState } from \"vuex\";\nimport { addFavorite, removeFavorite } from \"./../api\";\nexport default {\n  computed: {\n    ...mapState([\"user\"]),\n  },\n  methods: {\n    async onFavor(article) {\n      if (!this.user) {\n        alert(\"登录之后才能点赞啊~\");\n        return this.$router.replace(\"/login\");\n      }\n      this.$set(article, \"disabled\", true);\n      if (article.favorited) {\n        await removeFavorite(article.slug);\n        article.favoritesCount -= 1;\n        article.favorited = false;\n      } else {\n        await addFavorite(article.slug);\n        article.favoritesCount += 1;\n        article.favorited = true;\n      }\n      article.disabled = false;\n    },\n  },\n};\n","import { follow, unfollow } from \"../api\";\nexport default {\n  methods: {\n    async onFollow(author) {\n      if (!this.user) {\n        alert(\"not login\");\n        return this.$router.replace(\"/login\");\n      }\n      this.$set(author, \"disabled\", true);\n      if (author.following) {\n        await unfollow(author.username);\n        author.following = false;\n      } else {\n        await follow(author.username);\n        author.following = true;\n      }\n      author.disabled = false;\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-page\"},[_vm._ssrNode(\"<div class=\\\"banner\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container\\\">\",\"</div>\",[_vm._ssrNode(\"<h1>\"+_vm._ssrEscape(_vm._s(_vm.article.title))+\"</h1> \"),_c('article-meta',{attrs:{\"article\":_vm.article}})],2)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"container page\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row article-content\\\"><div class=\\\"col-md-12\\\">\"+(_vm._s(_vm.article.body))+\"</div> <ul class=\\\"tag-list\\\">\"+(_vm._ssrList((_vm.article.tagList),function(tag){return (\"<li class=\\\"tag-default tag-pill tag-outline\\\">\"+_vm._ssrEscape(\"\\n          \"+_vm._s(tag)+\"\\n        \")+\"</li>\")}))+\"</ul></div> <hr> \"),_vm._ssrNode(\"<div class=\\\"article-actions\\\">\",\"</div>\",[_c('article-meta',{attrs:{\"article\":_vm.article}})],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-xs-12 col-md-8 offset-md-2\\\">\",\"</div>\",[(_vm.user)?_vm._ssrNode(\"<form class=\\\"card comment-form\\\">\",\"</form>\",[_vm._ssrNode(\"<div class=\\\"card-block\\\"><textarea placeholder=\\\"Write a comment...\\\" rows=\\\"3\\\" class=\\\"form-control\\\">\"+_vm._ssrEscape(_vm._s(_vm.commentBody))+\"</textarea></div> <div class=\\\"card-footer\\\"><img\"+(_vm._ssrAttr(\"src\",_vm.user.image))+\" class=\\\"comment-author-img\\\"> <button\"+(_vm._ssrAttr(\"disabled\",_vm.disabled))+\" class=\\\"btn btn-sm btn-primary\\\">Post Comment</button></div>\")],2):_vm._ssrNode(\"<div>\",\"</div>\",[_c('nuxt-link',{attrs:{\"to\":\"/login\"}},[_vm._v(\"Sign in\")]),_vm._ssrNode(\"or\\n          \"),_c('nuxt-link',{attrs:{\"to\":\"register\"}},[_vm._v(\"Sign up\")]),_vm._ssrNode(\"to add comments on this article.\\n        \")],2),_vm._ssrNode(\" \"),_vm._l((_vm.comments),function(comment,index){return _vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-block\\\"><p class=\\\"card-text\\\">\"+_vm._ssrEscape(_vm._s(comment.body))+\"</p></div> \"),_vm._ssrNode(\"<div class=\\\"card-footer\\\">\",\"</div>\",[_c('nuxt-link',{staticClass:\"comment-author\",attrs:{\"to\":{name: 'profile', params: {username: comment.author.username}}}},[_c('img',{staticClass:\"comment-author-img\",attrs:{\"src\":comment.author.image}})]),_vm._ssrNode(\" \\n            \"),_c('nuxt-link',{staticClass:\"comment-author\",attrs:{\"to\":{name: 'profile', params: {username: comment.author.username}}}},[_vm._v(_vm._s(comment.author.username))]),_vm._ssrNode(\" <span class=\\\"date-posted\\\">\"+_vm._ssrEscape(_vm._s(_vm._f(\"date\")(comment.createdAt,'MMM DD')))+\"</span> \"+((_vm.user && comment.author.username == _vm.user.username)?(\"<span\"+(_vm._ssrClass(\"mod-options\",{disabled: _vm.disabled}))+\"><i class=\\\"ion-trash-a\\\"></i></span>\"):\"<!---->\"))],2)],2)})],2)])],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-meta\"},[_c('nuxt-link',{attrs:{\"to\":{name: 'profile', params: {username: _vm.article.author.username}}}},[_c('img',{attrs:{\"src\":_vm.article.author.image}})]),_vm._ssrNode(\" \"),_c('nuxt-link',{staticClass:\"info\",attrs:{\"tag\":\"div\",\"to\":{name: 'profile', params: {username: _vm.article.author.username}}}},[_c('a',{staticClass:\"author\",attrs:{\"href\":\"\"}},[_vm._v(_vm._s(_vm.article.author.username))]),_vm._v(\" \"),_c('span',{staticClass:\"date\"},[_vm._v(_vm._s(_vm._f(\"date\")(_vm.article.createdAt,'MMMM DD,YYYY')))])]),_vm._ssrNode(\" \"),(!_vm.user || _vm.user.username !== _vm.article.author.username)?_vm._ssrNode(\"<div style=\\\"display:inline-block\\\">\",\"</div>\",[_vm._ssrNode(\"<button\"+(_vm._ssrAttr(\"disabled\",_vm.article.author.disabled))+(_vm._ssrClass(\"btn btn-sm btn-outline-secondary\",{active: _vm.article.author.following}))+\"><i class=\\\"ion-plus-round\\\"></i>\"+_vm._ssrEscape(\"\\n       \\n      \"+_vm._s(_vm.article.author.following ? \"Unfollow\": \"Follow\")+\" \"+_vm._s(_vm.article.author.username)+\"\\n    \")+\"</button>\\n      \\n    <button\"+(_vm._ssrAttr(\"disabled\",_vm.article.disabled))+(_vm._ssrClass(\"btn btn-sm btn-outline-primary\",{active: _vm.article.favorited}))+\"><i class=\\\"ion-heart\\\"></i>\\n       \\n      Favorite Post\\n      <span class=\\\"counter\\\">\"+_vm._ssrEscape(\"(\"+_vm._s(_vm.article.favoritesCount)+\")\")+\"</span></button>\")],2):_vm._ssrNode(\"<div style=\\\"display:inline-block\\\">\",\"</div>\",[_c('nuxt-link',{staticClass:\"btn btn-outline-secondary btn-sm\",attrs:{\"to\":{name: 'editor', params: {slug: _vm.article.slug}}}},[_c('i',{staticClass:\"ion-edit\"}),_vm._v(\" Edit Article\\n    \")]),_vm._ssrNode(\" <button class=\\\"btn btn-outline-danger btn-sm\\\"><i class=\\\"ion-trash-a\\\"></i> Delete Article\\n    </button>\")],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport articleMixin from \"@/mixins/article-mixin\";\nimport userMixin from \"@/mixins/user-mixin\";\nimport { deleteArticle } from '../api';\nexport default {\n  props: {\n    article: {\n      type: Object,\n      required: true,\n    },\n  },\n  mixins: [articleMixin, userMixin],\n  methods: {\n    async deleteArticle(slug) {\n      const isConfirm = confirm('confirm deletion?');\n      if(isConfirm) {\n        const data = await deleteArticle(slug);\n        this.$router.replace('/')\n      }\n    }\n  },\n};\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./article-meta.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./article-meta.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./article-meta.vue?vue&type=template&id=e7a43c02&\"\nimport script from \"./article-meta.vue?vue&type=script&lang=js&\"\nexport * from \"./article-meta.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"88807a04\"\n  \n)\n\nexport default component.exports","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  getArticleDetail,\n  getArticleComments,\n  addArticleComments,\n  deleteArticleComments,\n} from \"../api\";\nimport ArticleMeta from \"@/components/article-meta\";\nimport markdown from \"markdown-it\";\nimport { mapState } from \"vuex\";\nexport default {\n  components: { ArticleMeta },\n  async asyncData({ params }) {\n    const md = new markdown();\n    const { slug } = params;\n    const commentReq = getArticleComments(slug);\n    const articleDetailReq = getArticleDetail(slug);\n    const [commentData, detailData] = await Promise.all([\n      commentReq,\n      articleDetailReq,\n    ]);\n    const { article } = detailData.data;\n    const { comments } = commentData.data;\n    article.body = md.render(article.body);\n    return {\n      article,\n      comments,\n    };\n  },\n  head() {\n    return {\n      title: `${this.article.title} -Realworld`,\n      meta: [{\n        hid: 'description',\n        name: 'description',\n        content: this.article.description\n      }]\n    }\n  },\n  data() {\n    return {\n      disabled: false,\n      commentBody: \"\",\n    };\n  },\n  computed: {\n    ...mapState([\"user\"]),\n  },\n  methods: {\n    async addComment() {\n      this.disabled = true;\n      const { slug } = this.$route.params;\n      const body = this.commentBody;\n      if(!body || !body.trim()) {\n        return alert('please input the comment body')\n      }\n      const { data } = await addArticleComments(slug, {\n        comment: { body },\n      });\n      const { comment } = data;\n      this.comments.unshift(comment);\n      this.disabled = false;\n      this.commentBody = \"\";\n    },\n    async deleteComment(index) {\n      if (this.disabled) return;\n      this.disabled = true;\n      const { slug } = this.$route.params;\n      try {\n        const data = await deleteArticleComments(slug, this.comments[index].id);\n      } catch (e) {\n        console.dir(e);\n        return alert(\"delete error: \" + e.response.data.error);\n      }\n      this.comments.splice(index, 1);\n      this.disabled = false;\n    },\n  },\n};\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./article.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./article.vue?vue&type=template&id=3cf411cc&\"\nimport script from \"./article.vue?vue&type=script&lang=js&\"\nexport * from \"./article.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"67401814\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AAEA;AACA;AACA;;ACJA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAlBA;AAJA;;;;;;;;ACFA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAhBA;AADA;;;;;;;;;;;;ACDA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AARA;AARA;;AC3DA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAQA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AADA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AA7BA;AAtCA;;ACtFA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}